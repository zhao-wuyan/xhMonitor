{"id":"SOL-DSC-20260119-150946-005-k7m2","description":"Centralize configuration management with single source of truth in database, eliminate hardcoded defaults","approach":"Create ConfigurationDefaults class in Core module as single source of truth, refactor ViewModel and RestoreDefaults to use it, ensure database seed data matches defaults","analysis":{"risk":"low","impact":"medium","complexity":"low"},"score":0.9,"tasks":[{"id":"T1","title":"Create ConfigurationDefaults class in Core module","scope":"XhMonitor.Core","action":"Create","description":"Create static class to define all default configuration values as single source of truth","modification_points":["XhMonitor.Core/Configuration/ConfigurationDefaults.cs"],"implementation":["Create new file XhMonitor.Core/Configuration/ConfigurationDefaults.cs","Define static class ConfigurationDefaults with nested classes for each category (Appearance, DataCollection, System)","Add const fields for all default values: ThemeColor=\"Dark\", Opacity=60, ProcessKeywords=[\"python\",\"llama\"], SystemInterval=1000, ProcessInterval=5000, TopProcessCount=10, DataRetentionDays=30, StartWithWindows=false, SignalRPort=35179, WebPort=35180","Add XML documentation comments for each field explaining purpose and valid ranges","Ensure all values match current database seed data in MonitorDbContext.cs"],"test":{"unit":[],"commands":[]},"acceptance":{"criteria":["ConfigurationDefaults class exists in XhMonitor.Core/Configuration/","All 10 configuration fields defined as const with correct default values","XML documentation present for all fields","Values match database seed data in MonitorDbContext.cs line 76-90"],"verification":["Verify file exists at XhMonitor.Core/Configuration/ConfigurationDefaults.cs","Check all const fields present: ThemeColor, Opacity, ProcessKeywords, SystemInterval, ProcessInterval, TopProcessCount, DataRetentionDays, StartWithWindows, SignalRPort, WebPort","Confirm values match MonitorDbContext seed data"]},"commit":{"type":"feat","scope":"core","message_template":"feat(core): add ConfigurationDefaults as single source of truth for default values"},"depends_on":[],"priority":1},{"id":"T2","title":"Refactor SettingsViewModel to use ConfigurationDefaults","scope":"XhMonitor.Desktop/ViewModels","action":"Update","description":"Replace hardcoded default values in SettingsViewModel constructor with references to ConfigurationDefaults","modification_points":["XhMonitor.Desktop/ViewModels/SettingsViewModel.cs"],"implementation":["Add using statement: using XhMonitor.Core.Configuration;","Update line 16: _themeColor = ConfigurationDefaults.Appearance.ThemeColor;","Update line 17: _opacity = ConfigurationDefaults.Appearance.Opacity;","Update line 21: _systemInterval = ConfigurationDefaults.DataCollection.SystemInterval;","Update line 22: _processInterval = ConfigurationDefaults.DataCollection.ProcessInterval;","Update line 23: _topProcessCount = ConfigurationDefaults.DataCollection.TopProcessCount;","Update line 24: _dataRetentionDays = ConfigurationDefaults.DataCollection.DataRetentionDays;","Update line 27: _startWithWindows = ConfigurationDefaults.System.StartWithWindows;","Update line 28: _signalRPort = ConfigurationDefaults.System.SignalRPort;","Update line 29: _webPort = ConfigurationDefaults.System.WebPort;","Remove hardcoded values, keep only ConfigurationDefaults references"],"test":{"unit":[],"commands":["dotnet build XhMonitor.Desktop"]},"acceptance":{"criteria":["All 10 hardcoded default values replaced with ConfigurationDefaults references","No hardcoded literals remain in SettingsViewModel constructor (lines 16-29)","Build succeeds without errors","SettingsViewModel compiles and references Core module correctly"],"verification":["Search SettingsViewModel.cs for hardcoded values: \"Dark\", 60, 1000, 5000, 10, 30, false, 35179, 35180","Verify all replaced with ConfigurationDefaults.Category.Field pattern","Run dotnet build and confirm success"]},"commit":{"type":"refactor","scope":"desktop","message_template":"refactor(desktop): use ConfigurationDefaults in SettingsViewModel"},"depends_on":["T1"],"priority":2},{"id":"T3","title":"Refactor RestoreDefaults to use ConfigurationDefaults","scope":"XhMonitor.Desktop/Windows","action":"Update","description":"Replace hardcoded default values in SettingsWindow.RestoreDefaults_Click with ConfigurationDefaults references","modification_points":["XhMonitor.Desktop/Windows/SettingsWindow.xaml.cs"],"implementation":["Add using statement: using XhMonitor.Core.Configuration;","Update line 51: _viewModel.ThemeColor = ConfigurationDefaults.Appearance.ThemeColor;","Update line 52: _viewModel.Opacity = ConfigurationDefaults.Appearance.Opacity;","Update lines 54-55: Replace hardcoded keywords with loop over ConfigurationDefaults.DataCollection.ProcessKeywords","Update line 56: _viewModel.SystemInterval = ConfigurationDefaults.DataCollection.SystemInterval;","Update line 57: _viewModel.ProcessInterval = ConfigurationDefaults.DataCollection.ProcessInterval;","Update line 58: _viewModel.TopProcessCount = ConfigurationDefaults.DataCollection.TopProcessCount;","Update line 59: _viewModel.DataRetentionDays = ConfigurationDefaults.DataCollection.DataRetentionDays;","Update line 60: _viewModel.StartWithWindows = ConfigurationDefaults.System.StartWithWindows;","Update line 61: _viewModel.SignalRPort = ConfigurationDefaults.System.SignalRPort;","Update line 62: _viewModel.WebPort = ConfigurationDefaults.System.WebPort;"],"test":{"unit":[],"commands":["dotnet build XhMonitor.Desktop"]},"acceptance":{"criteria":["All 10 hardcoded default values replaced with ConfigurationDefaults references in RestoreDefaults_Click","ProcessKeywords populated from ConfigurationDefaults array","No hardcoded literals remain in method (lines 51-62)","Build succeeds without errors"],"verification":["Search SettingsWindow.xaml.cs RestoreDefaults_Click for hardcoded values","Verify all replaced with ConfigurationDefaults references","Run dotnet build and confirm success","Test RestoreDefaults button in UI"]},"commit":{"type":"refactor","scope":"desktop","message_template":"refactor(desktop): use ConfigurationDefaults in RestoreDefaults"},"depends_on":["T1"],"priority":2},{"id":"T4","title":"Update database seed data to reference ConfigurationDefaults","scope":"XhMonitor.Service/Data","action":"Update","description":"Ensure MonitorDbContext seed data uses ConfigurationDefaults to maintain consistency","modification_points":["XhMonitor.Service/Data/MonitorDbContext.cs"],"implementation":["Add using statement: using XhMonitor.Core.Configuration;","Update line 77: Value = JsonSerializer.Serialize(ConfigurationDefaults.Appearance.ThemeColor)","Update line 78: Value = ConfigurationDefaults.Appearance.Opacity.ToString()","Update lines 79-85: Update all DataCollection seed values to use ConfigurationDefaults.DataCollection fields","Update lines 88-90: Update all System seed values to use ConfigurationDefaults.System fields","Add using System.Text.Json; if not present","Ensure all seed data values dynamically reference ConfigurationDefaults instead of hardcoded strings"],"test":{"unit":[],"commands":["dotnet build XhMonitor.Service","dotnet ef migrations add UpdateSeedDataToUseDefaults --project XhMonitor.Service"]},"acceptance":{"criteria":["All 10 seed data values reference ConfigurationDefaults instead of hardcoded strings","Migration generated successfully","Build succeeds without errors","Seed data values match ConfigurationDefaults at runtime"],"verification":["Search MonitorDbContext.cs for hardcoded seed values","Verify all replaced with ConfigurationDefaults references","Run dotnet ef migrations add and confirm success","Check generated migration file for correct values"]},"commit":{"type":"refactor","scope":"service","message_template":"refactor(service): use ConfigurationDefaults in database seed data"},"depends_on":["T1"],"priority":3}],"is_bound":true,"bound_at":"2026-01-19T16:19:52.513Z"}
