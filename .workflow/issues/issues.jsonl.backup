{"id":"DSC-20260119-150946-001","discovery_id":"DSC-20260119-150946","title":"God class: App.xaml.cs violates single responsibility principle","type":"refactor","priority":"critical","status":"discovered","perspectives":["maintainability"],"category":"cohesion","description":"App.xaml.cs handles UI lifecycle, Tray Icon logic, Backend Service process management, Web Server process management, AND Node.js build steps. This massive violation of Single Responsibility Principle makes the class difficult to test, maintain, and understand.","file":"XhMonitor.Desktop/App.xaml.cs","line":14,"tags":["cohesion","single-responsibility","architecture"],"confidence":0.98,"created_at":"2026-01-19T15:09:46+08:00"}
{"id":"DSC-20260119-150946-002","discovery_id":"DSC-20260119-150946","title":"Development build tools in production runtime","type":"refactor","priority":"critical","status":"discovered","perspectives":["maintainability"],"category":"tech-debt","description":"Application runs 'npm install' and 'npm run build' on startup if dist folder is missing. This introduces runtime dependency on Node.js/npm, causes slow startup, and creates security risks.","file":"XhMonitor.Desktop/App.xaml.cs","line":518,"tags":["tech-debt","deployment","build-process"],"confidence":1,"created_at":"2026-01-19T15:09:46+08:00"}
{"id":"DSC-20260119-150946-003","discovery_id":"DSC-20260119-150946","title":"Concrete class dependency in Worker violates dependency inversion","type":"refactor","priority":"high","status":"discovered","perspectives":["maintainability"],"category":"coupling","description":"Worker class directly injects concrete SystemMetricProvider instead of interface, preventing unit testing and violating dependency inversion principle.","file":"XhMonitor.Service/Worker.cs","line":33,"tags":["coupling","dependency-inversion","testability"],"confidence":0.95,"created_at":"2026-01-19T15:09:46+08:00"}
{"id":"DSC-20260119-150946-004","discovery_id":"DSC-20260119-150946","title":"Open/Closed Principle violation in SystemMetricProvider","type":"refactor","priority":"high","status":"discovered","perspectives":["maintainability"],"category":"extensibility","description":"Uses type checking (is LibreHardwareMonitorVramProvider) to access specific methods not in interface. Adding new providers requires modifying this class.","file":"XhMonitor.Core/Providers/SystemMetricProvider.cs","line":179,"tags":["extensibility","open-closed","interface-design"],"confidence":0.92,"created_at":"2026-01-19T15:09:46+08:00"}
{"id":"DSC-20260119-150946-005","discovery_id":"DSC-20260119-150946","title":"Scattered configuration management across modules","type":"refactor","priority":"high","status":"discovered","perspectives":["maintainability"],"category":"module-boundary","description":"Configuration scattered across appsettings.json, database, hardcoded defaults in ViewModels, and App.xaml.cs. Creates inconsistency and maintenance burden.","file":"XhMonitor.Desktop/ViewModels/SettingsViewModel.cs","line":13,"tags":["module-boundary","configuration","consistency"],"confidence":0.9,"created_at":"2026-01-19T15:09:46+08:00"}
{"id":"DSC-20260119-150946-006","discovery_id":"DSC-20260119-150946","title":"Desktop module directly depends on Service port configuration","type":"refactor","priority":"high","status":"discovered","perspectives":["maintainability"],"category":"module-boundary","description":"Desktop hardcodes Service API endpoint (localhost:35179), creating tight coupling. Changes to Service port require updating Desktop code.","file":"XhMonitor.Desktop/ViewModels/SettingsViewModel.cs","line":13,"tags":["module-boundary","coupling","service-discovery"],"confidence":0.93,"created_at":"2026-01-19T15:09:46+08:00"}
{"id":"DSC-20260119-150946-007","discovery_id":"DSC-20260119-150946","title":"Dual configuration systems: appsettings.json and database","type":"refactor","priority":"high","status":"discovered","perspectives":["maintainability"],"category":"interface-design","description":"System uses both appsettings.json and ApplicationSettings database table with unclear boundaries, leading to confusion and potential synchronization issues.","file":"XhMonitor.Service/Data/MonitorDbContext.cs","line":85,"tags":["interface-design","configuration","architecture"],"confidence":0.88,"created_at":"2026-01-19T15:09:46+08:00"}
{"id":"DSC-20260119-150946-008","discovery_id":"DSC-20260119-150946","title":"Fake Asynchrony - Sync-over-Async Wrapper","type":"refactor","priority":"high","status":"discovered","perspectives":["best-practices"],"category":"anti-pattern","description":"Wrapping fast synchronous P/Invoke calls in Task.Run introduces thread pool overhead without scalability benefits. This is 'fake async' that degrades throughput under load.","file":"XhMonitor.Core/Providers/SystemMetricProvider.cs","line":149,"tags":["best-practices","performance","async"],"confidence":0.95,"created_at":"2026-01-19T15:09:46+08:00"}
{"id":"DSC-20260119-150946-009","discovery_id":"DSC-20260119-150946","title":"Weakly-Typed SignalR Hub - Magic Strings","type":"refactor","priority":"high","status":"discovered","perspectives":["best-practices"],"category":"framework-usage","description":"Using IHubContext with SendAsync and magic strings relies on runtime string matching. Error-prone, hard to refactor, lacks compile-time safety.","file":"XhMonitor.Service/Worker.cs","line":17,"tags":["best-practices","signalr","type-safety"],"confidence":0.98,"created_at":"2026-01-19T15:09:46+08:00"}
{"id":"DSC-20260119-150946-010","discovery_id":"DSC-20260119-150946","title":"Blocking Async Operations - .Result and .Wait() Usage","type":"bug","priority":"high","status":"discovered","perspectives":["best-practices"],"category":"anti-pattern","description":"Multiple instances of blocking async operations using .Result, .Wait(), and .GetAwaiter().GetResult(). Can cause deadlocks in UI contexts.","file":"XhMonitor.Desktop/FloatingWindow.xaml.cs","line":716,"tags":["best-practices","async","deadlock-risk"],"confidence":0.92,"created_at":"2026-01-19T15:09:46+08:00"}
{"id":"DSC-20260119-150946-011","discovery_id":"DSC-20260119-150946","title":"HttpClient Instance Per Request - Socket Exhaustion Risk","type":"bug","priority":"high","status":"discovered","perspectives":["best-practices"],"category":"anti-pattern","description":"Creating new HttpClient() in constructor violates best practices. Should be reused or created via IHttpClientFactory to avoid socket exhaustion.","file":"XhMonitor.Desktop/ViewModels/SettingsViewModel.cs","line":35,"tags":["best-practices","httpclient","resource-management"],"confidence":0.95,"created_at":"2026-01-19T15:09:46+08:00"}
