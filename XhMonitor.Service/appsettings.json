{
  "Serilog": {
    "Using": [
      "Serilog.Sinks.Console",
      "Serilog.Sinks.Debug",
      "Serilog.Sinks.File"
    ],
    "MinimumLevel": {
      "Default": "Information",
      "Override": {
        "Microsoft": "Warning",
        "Microsoft.AspNetCore": "Warning",
        "Microsoft.EntityFrameworkCore": "Error",
        "Microsoft.EntityFrameworkCore.Database.Command": "Error",
        "XhMonitor.Service.Data.Repositories": "Warning"
      }
    },
    "WriteTo": [
      {
        "Name": "Console",
        "Args": {
          "restrictedToMinimumLevel": "Information",
          "outputTemplate": "[{Timestamp:HH:mm:ss} {Level:u3}] {SourceContext}{NewLine}{Message:lj}{NewLine}{Exception}"
        }
      },
      {
        "Name": "Debug",
        "Args": {
          "restrictedToMinimumLevel": "Information",
          "outputTemplate": "[{Timestamp:HH:mm:ss} {Level:u3}] {SourceContext}{NewLine}{Message:lj}{NewLine}{Exception}"
        }
      },
      {
        "Name": "File",
        "Args": {
          "path": "logs/xhmonitor-.log",
          "restrictedToMinimumLevel": "Debug",
          "rollingInterval": "Day",
          "fileSizeLimitBytes": 52428800,
          "rollOnFileSizeLimit": true,
          "retainedFileCountLimit": 7,
          "outputTemplate": "[{Timestamp:yyyy-MM-dd HH:mm:ss.fff zzz}] [{Level:u3}] {SourceContext}{NewLine}{Message:lj}{NewLine}{Exception}"
        }
      }
    ],
    "Enrich": [
      "FromLogContext"
    ]
  },
  "ConnectionStrings": {
    "DatabaseConnection": "Data Source=xhmonitor.db;Mode=ReadWriteCreate;Cache=Shared"
  },
  "Monitor": {
    "IntervalSeconds": 3,
    "Keywords": [
      "llama-server",
      "whisper",
      "indextts",
      "envmain",
      "!powershell"
    ],
    "ProcessNameRules": [
      {
        "ProcessName": "llama-server",
        "Keywords": [
          "llama-server.exe"
        ],
        "Type": "Regex",
        "Pattern": ".*\\\\([^\\\\]+)\\\\[^\\\\]*\\.gguf.*",
        "Group": 1,
        "Format": "llama-server: {0}"
      },
      {
        "ProcessName": "chrome",
        "Keywords": [],
        "Type": "Direct",
        "DisplayName": "Google Chrome"
      },
      {
        "ProcessName": "python",
        "Keywords": ["python"],
        "Type": "Regex",
        "Pattern": "python.exe\"?\\s+\"?(?:.*?[\\\\\\/])*([^\\/\"\\s]+.(?:py|exe))",
        "Group": 1,
        "Format": "Python: {0}"
      },
      {
        "ProcessName": "node",
        "Keywords": [
          "express"
        ],
        "Type": "Regex",
        "Pattern": "([^\\\\/:*?\"<>|\\r\\n]+\\.js)",
        "Group": 1,
        "Format": "Express: {0}"
      },
      {
        "ProcessName": "node",
        "Keywords": [
          "server"
        ],
        "Type": "Regex",
        "Pattern": "([^\\\\/:*?\"<>|\\r\\n]+\\.js)",
        "Group": 1,
        "Format": "Node Server: {0}"
      }
    ]
  },
  "MetricProviders": {
    "PluginDirectory": ""
  },
  "Server": {
    "Host": "localhost",
    "Port": 35179,
    "HubPath": "/hubs/metrics"
  },
  "Database": {
    "RetentionDays": 30,
    "CleanupIntervalHours": 24
  }
}
