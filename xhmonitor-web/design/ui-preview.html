<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>XhMonitor - ç³»ç»Ÿç›‘æ§é¢„è§ˆ</title>
    <style>
        /* --- æ ¸å¿ƒå˜é‡ä¸é‡ç½® --- */
        :root {
            --bg-color: #0f172a;
            --text-primary: #f8fafc;
            --text-secondary: #94a3b8;
            --glass-bg: rgba(30, 41, 59, 0.4);
            --glass-border: rgba(255, 255, 255, 0.08);
            --glass-highlight: rgba(255, 255, 255, 0.05);
            --accent-primary: #3b82f6;
            --accent-secondary: #8b5cf6;
            --accent-success: #10b981;
            --accent-warning: #f59e0b;
            --accent-danger: #ef4444;
            --font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
            --transition-speed: 0.3s;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            background-color: var(--bg-color);
            background-image: 
                radial-gradient(circle at 10% 20%, rgba(59, 130, 246, 0.15) 0%, transparent 40%),
                radial-gradient(circle at 90% 80%, rgba(139, 92, 246, 0.15) 0%, transparent 40%);
            color: var(--text-primary);
            font-family: var(--font-family);
            line-height: 1.5;
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* --- ç»ç’ƒæ‹Ÿæ€å·¥å…·ç±» --- */
        .glass-panel {
            background: var(--glass-bg);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid var(--glass-border);
            border-radius: 16px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            transition: transform var(--transition-speed), box-shadow var(--transition-speed);
        }

        .glass-panel:hover {
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.2), 0 4px 6px -2px rgba(0, 0, 0, 0.1);
            background: rgba(30, 41, 59, 0.5); /* Slightly lighter on hover */
        }

        /* --- å¸ƒå±€ç»“æ„ --- */
        .app-container {
            display: grid;
            grid-template-columns: 240px 1fr;
            grid-template-rows: auto 1fr;
            min-height: 100vh;
            gap: 20px;
            padding: 20px;
        }

        /* å“åº”å¼ï¼šå°å±å¹•ä¾§è¾¹æ éšè—æˆ–æ”¹ä¸ºé¡¶éƒ¨ */
        @media (max-width: 1024px) {
            .app-container {
                grid-template-columns: 1fr;
            }
            .sidebar {
                display: none; /* ç®€åŒ–æ¼”ç¤º */
            }
        }

        /* --- ä¾§è¾¹æ  --- */
        .sidebar {
            grid-row: 1 / -1;
            display: flex;
            flex-direction: column;
            padding: 20px;
            gap: 20px;
        }

        .logo-area {
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: bold;
            font-size: 1.25rem;
            color: var(--accent-primary);
            margin-bottom: 20px;
        }
        
        .logo-icon {
            width: 32px;
            height: 32px;
            background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
            border-radius: 8px;
            display: grid;
            place-items: center;
            color: white;
            font-size: 18px;
        }

        .nav-menu {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .nav-item {
            padding: 12px 16px;
            border-radius: 12px;
            cursor: pointer;
            color: var(--text-secondary);
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .nav-item.active, .nav-item:hover {
            background: var(--glass-highlight);
            color: var(--text-primary);
        }
        
        .nav-item.active {
            border-left: 3px solid var(--accent-primary);
        }

        /* --- å¤´éƒ¨ --- */
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 10px;
            margin-bottom: 10px;
        }

        .status-badge {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 6px 12px;
            border-radius: 20px;
            background: rgba(16, 185, 129, 0.1);
            color: var(--accent-success);
            font-size: 0.875rem;
            font-weight: 500;
            border: 1px solid rgba(16, 185, 129, 0.2);
        }

        .status-dot {
            width: 8px;
            height: 8px;
            background-color: currentColor;
            border-radius: 50%;
            box-shadow: 0 0 8px currentColor;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }

        /* --- ä¸»å†…å®¹åŒº --- */
        .main-content {
            display: flex;
            flex-direction: column;
            gap: 24px;
        }

        /* --- æ¦‚è§ˆå¡ç‰‡ Grid --- */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 20px;
        }

        .stat-card {
            padding: 20px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            height: 160px;
            position: relative;
            overflow: hidden;
        }

        .stat-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            z-index: 2;
        }

        .stat-title {
            font-size: 0.875rem;
            color: var(--text-secondary);
            font-weight: 500;
        }

        .stat-icon {
            padding: 8px;
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.05);
            color: var(--text-primary);
        }

        .stat-value {
            font-size: 2.5rem;
            font-weight: 700;
            margin: 10px 0;
            z-index: 2;
            background: linear-gradient(to right, #fff, #cbd5e1);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .stat-sub {
            font-size: 0.875rem;
            color: var(--text-secondary);
            display: flex;
            gap: 8px;
            align-items: center;
            z-index: 2;
        }

        .trend-up { color: var(--accent-danger); }
        .trend-down { color: var(--accent-success); }

        /* èƒŒæ™¯è£…é¥° */
        .card-bg-gradient {
            position: absolute;
            top: -50%;
            right: -50%;
            width: 200px;
            height: 200px;
            background: radial-gradient(circle, var(--glow-color, rgba(59, 130, 246, 0.15)) 0%, transparent 70%);
            border-radius: 50%;
            z-index: 1;
            transition: opacity 0.3s;
        }

        /* --- å›¾è¡¨åŒºåŸŸ --- */
        .charts-section {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 20px;
            height: 350px;
        }

        @media (max-width: 1024px) {
            .charts-section {
                grid-template-columns: 1fr;
                height: auto;
            }
        }

        .main-chart-container {
            padding: 20px;
            display: flex;
            flex-direction: column;
        }

        .chart-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 15px;
        }
        
        .chart-title {
            font-size: 1.1rem;
            font-weight: 600;
        }

        .chart-legend {
            display: flex;
            gap: 15px;
            font-size: 0.875rem;
            color: var(--text-secondary);
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 6px;
        }
        
        .legend-dot {
            width: 10px;
            height: 10px;
            border-radius: 2px;
        }

        .canvas-wrapper {
            flex: 1;
            position: relative;
            width: 100%;
            min-height: 250px;
        }

        canvas {
            width: 100%;
            height: 100%;
        }

        /* --- è¿›ç¨‹åˆ—è¡¨ --- */
        .process-section {
            padding: 20px;
            overflow: hidden;
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .table-container {
            width: 100%;
            overflow-x: auto;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.9rem;
        }

        th {
            text-align: left;
            padding: 12px 16px;
            color: var(--text-secondary);
            font-weight: 500;
            border-bottom: 1px solid var(--glass-border);
        }

        td {
            padding: 12px 16px;
            color: var(--text-primary);
            border-bottom: 1px solid rgba(255,255,255,0.02);
        }

        tr:last-child td {
            border-bottom: none;
        }

        tr:hover td {
            background: var(--glass-highlight);
        }

        .process-name {
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: 500;
        }

        .process-icon {
            width: 24px;
            height: 24px;
            background: #334155;
            border-radius: 4px;
            display: grid;
            place-items: center;
            font-size: 12px;
        }

        /* è¿›åº¦æ¡æ ·å¼ */
        .bar-bg {
            width: 100px;
            height: 6px;
            background: rgba(255,255,255,0.1);
            border-radius: 3px;
            overflow: hidden;
        }
        
        .bar-fill {
            height: 100%;
            border-radius: 3px;
        }

    </style>
</head>
<body>

<div class="app-container">
    <!-- ä¾§è¾¹æ  -->
    <aside class="sidebar glass-panel">
        <div class="logo-area">
            <div class="logo-icon">XM</div>
            <span>XhMonitor</span>
        </div>
        <nav class="nav-menu">
            <div class="nav-item active">
                <span>ğŸ“Š</span> ä»ªè¡¨ç›˜
            </div>
            <div class="nav-item">
                <span>ğŸš€</span> è¿›ç¨‹ç®¡ç†
            </div>
            <div class="nav-item">
                <span>ğŸ®</span> æ¸¸æˆæ¨¡å¼
            </div>
            <div class="nav-item">
                <span>âš™ï¸</span> è®¾ç½®
            </div>
        </nav>
    </aside>

    <!-- ä¸»å†…å®¹ -->
    <main class="main-content">
        <!-- é¡¶éƒ¨æ  -->
        <header class="header">
            <div>
                <h1 style="font-size: 1.5rem; font-weight: 600;">ä»ªè¡¨ç›˜æ¦‚è§ˆ</h1>
                <p style="color: var(--text-secondary); font-size: 0.9rem;">å®æ—¶ç³»ç»Ÿèµ„æºç›‘æ§é¢æ¿</p>
            </div>
            <div class="status-badge">
                <div class="status-dot"></div>
                å·²è¿æ¥æœåŠ¡
            </div>
        </header>

        <!-- ç»Ÿè®¡å¡ç‰‡ -->
        <section class="stats-grid">
            <!-- CPU Card -->
            <div class="stat-card glass-panel" style="--glow-color: rgba(59, 130, 246, 0.3);">
                <div class="card-bg-gradient"></div>
                <div class="stat-header">
                    <span class="stat-title">CPU ä½¿ç”¨ç‡</span>
                    <div class="stat-icon">ğŸ’»</div>
                </div>
                <div class="stat-value" id="cpu-value">0%</div>
                <div class="stat-sub">
                    <span class="trend-up">â†‘ 2.1%</span> vs ä¸Šä¸€åˆ†é’Ÿ
                </div>
                <!-- è¿·ä½ å›¾å ä½ -->
                <div class="mini-chart" id="cpu-mini-chart" style="height: 30px; margin-top: auto; opacity: 0.5;"></div>
            </div>

            <!-- RAM Card -->
            <div class="stat-card glass-panel" style="--glow-color: rgba(139, 92, 246, 0.3);">
                <div class="card-bg-gradient"></div>
                <div class="stat-header">
                    <span class="stat-title">å†…å­˜ä½¿ç”¨</span>
                    <div class="stat-icon">ğŸ§ </div>
                </div>
                <div class="stat-value" id="ram-value">0 GB</div>
                <div class="stat-sub">
                    <span style="color: var(--text-secondary)">16.0 / 32.0 GB</span>
                </div>
                <div class="mini-chart" id="ram-mini-chart" style="height: 30px; margin-top: auto; opacity: 0.5;"></div>
            </div>

            <!-- GPU Card -->
            <div class="stat-card glass-panel" style="--glow-color: rgba(16, 185, 129, 0.3);">
                <div class="card-bg-gradient"></div>
                <div class="stat-header">
                    <span class="stat-title">GPU æ ¸å¿ƒ</span>
                    <div class="stat-icon">ğŸ®</div>
                </div>
                <div class="stat-value" id="gpu-value">0%</div>
                <div class="stat-sub">
                    <span>RTX 4090</span>
                </div>
                <div class="mini-chart" id="gpu-mini-chart" style="height: 30px; margin-top: auto; opacity: 0.5;"></div>
            </div>

            <!-- VRAM Card -->
            <div class="stat-card glass-panel" style="--glow-color: rgba(245, 158, 11, 0.3);">
                <div class="card-bg-gradient"></div>
                <div class="stat-header">
                    <span class="stat-title">æ˜¾å­˜ä½¿ç”¨</span>
                    <div class="stat-icon">ğŸ’¾</div>
                </div>
                <div class="stat-value" id="vram-value">0 GB</div>
                <div class="stat-sub">
                    <span>12.5 / 24.0 GB</span>
                </div>
                <div class="mini-chart" id="vram-mini-chart" style="height: 30px; margin-top: auto; opacity: 0.5;"></div>
            </div>
        </section>

        <!-- å›¾è¡¨åŒºåŸŸ -->
        <section class="charts-section">
            <div class="main-chart-container glass-panel">
                <div class="chart-header">
                    <span class="chart-title">èµ„æºå†å²è¶‹åŠ¿ (60s)</span>
                    <div class="chart-legend">
                        <div class="legend-item"><div class="legend-dot" style="background: var(--accent-primary)"></div>CPU</div>
                        <div class="legend-item"><div class="legend-dot" style="background: var(--accent-secondary)"></div>GPU</div>
                        <div class="legend-item"><div class="legend-dot" style="background: var(--accent-success)"></div>RAM</div>
                    </div>
                </div>
                <div class="canvas-wrapper">
                    <canvas id="mainChart"></canvas>
                </div>
            </div>
            
            <div class="glass-panel" style="padding: 20px; display: flex; flex-direction: column; gap: 15px;">
                <span class="chart-title">ç³»ç»Ÿæ¸©åº¦</span>
                <div style="flex: 1; display: flex; flex-direction: column; justify-content: center; gap: 20px;">
                    <div>
                        <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                            <span style="color: var(--text-secondary)">CPU Package</span>
                            <span id="temp-cpu">0Â°C</span>
                        </div>
                        <div class="bar-bg" style="width: 100%; height: 8px;">
                            <div class="bar-fill" id="bar-temp-cpu" style="width: 45%; background: linear-gradient(90deg, #3b82f6, #ef4444);"></div>
                        </div>
                    </div>
                    <div>
                        <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                            <span style="color: var(--text-secondary)">GPU Hotspot</span>
                            <span id="temp-gpu">0Â°C</span>
                        </div>
                        <div class="bar-bg" style="width: 100%; height: 8px;">
                            <div class="bar-fill" id="bar-temp-gpu" style="width: 60%; background: linear-gradient(90deg, #10b981, #ef4444);"></div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- è¿›ç¨‹åˆ—è¡¨ -->
        <section class="process-section glass-panel">
            <div class="section-header">
                <span class="chart-title">Top èµ„æºæ¶ˆè€—è¿›ç¨‹</span>
                <button style="background: rgba(255,255,255,0.1); border: none; color: white; padding: 6px 12px; border-radius: 6px; cursor: pointer;">åˆ·æ–°åˆ—è¡¨</button>
            </div>
            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th>è¿›ç¨‹åç§°</th>
                            <th>PID</th>
                            <th>CPU</th>
                            <th>å†…å­˜</th>
                            <th>GPU</th>
                        </tr>
                    </thead>
                    <tbody id="process-table-body">
                        <!-- JS å¡«å…… -->
                    </tbody>
                </table>
            </div>
        </section>
    </main>
</div>

<script>
    // --- æ¨¡æ‹Ÿæ•°æ®å¼•æ“ ---
    const MAX_POINTS = 60;
    
    class DataStream {
        constructor() {
            this.cpu = new Array(MAX_POINTS).fill(0);
            this.gpu = new Array(MAX_POINTS).fill(0);
            this.ram = new Array(MAX_POINTS).fill(0);
            this.tick = 0;
        }

        next() {
            this.tick++;
            // æ¨¡æ‹Ÿæ³¢åŠ¨æ•°æ®
            const cpuVal = 20 + Math.sin(this.tick * 0.1) * 10 + Math.random() * 15;
            const gpuVal = 30 + Math.cos(this.tick * 0.05) * 20 + Math.random() * 10;
            const ramVal = 45 + Math.random() * 5;

            this.shiftAndPush(this.cpu, Math.min(100, Math.max(0, cpuVal)));
            this.shiftAndPush(this.gpu, Math.min(100, Math.max(0, gpuVal)));
            this.shiftAndPush(this.ram, Math.min(100, Math.max(0, ramVal)));

            return {
                cpu: this.cpu[this.cpu.length - 1],
                gpu: this.gpu[this.gpu.length - 1],
                ram: this.ram[this.ram.length - 1]
            };
        }

        shiftAndPush(arr, val) {
            arr.shift();
            arr.push(val);
        }
    }

    const stream = new DataStream();

    // --- å›¾è¡¨ç»˜åˆ¶å¼•æ“ (Canvas) ---
    class ChartEngine {
        constructor(canvasId) {
            this.canvas = document.getElementById(canvasId);
            this.ctx = this.canvas.getContext('2d');
            this.resize();
            window.addEventListener('resize', () => this.resize());
        }

        resize() {
            // è·å–çˆ¶å®¹å™¨å¤§å°
            const parent = this.canvas.parentElement;
            this.canvas.width = parent.clientWidth;
            this.canvas.height = parent.clientHeight;
        }

        draw(dataStream) {
            const { width, height } = this.canvas;
            const ctx = this.ctx;

            // æ¸…ç©ºç”»å¸ƒ
            ctx.clearRect(0, 0, width, height);

            // ç»˜åˆ¶ç½‘æ ¼
            ctx.strokeStyle = 'rgba(255, 255, 255, 0.05)';
            ctx.lineWidth = 1;
            ctx.beginPath();
            for(let i=0; i<5; i++) {
                const y = height - (height / 4) * i;
                ctx.moveTo(0, y);
                ctx.lineTo(width, y);
            }
            ctx.stroke();

            // ç»˜åˆ¶çº¿æ¡æ–¹æ³•
            const drawLine = (data, color) => {
                ctx.strokeStyle = color;
                ctx.lineWidth = 2;
                ctx.lineCap = 'round';
                ctx.lineJoin = 'round';
                ctx.beginPath();

                const stepX = width / (MAX_POINTS - 1);
                
                data.forEach((val, index) => {
                    const x = index * stepX;
                    const y = height - (val / 100) * height; // 0-100 range
                    if (index === 0) ctx.moveTo(x, y);
                    else ctx.lineTo(x, y);
                });
                ctx.stroke();

                // å¡«å……æ¸å˜
                const gradient = ctx.createLinearGradient(0, 0, 0, height);
                gradient.addColorStop(0, color.replace(')', ', 0.2)').replace('rgb', 'rgba')); // Hacky opacity
                gradient.addColorStop(1, 'rgba(0,0,0,0)');
                
                ctx.fillStyle = gradient;
                ctx.lineTo(width, height);
                ctx.lineTo(0, height);
                ctx.fill();
            };

            // ç»˜åˆ¶ CPU, GPU, RAM
            drawLine(dataStream.ram, 'rgb(16, 185, 129)'); // Green
            drawLine(dataStream.gpu, 'rgb(139, 92, 246)'); // Violet
            drawLine(dataStream.cpu, 'rgb(59, 130, 246)'); // Blue
        }
    }

    const mainChart = new ChartEngine('mainChart');

    // --- è¿›ç¨‹åˆ—è¡¨æ¨¡æ‹Ÿ ---
    const mockProcesses = [
        { name: 'xhMonitor.exe', pid: 1240, cpu: 0.5, ram: 120, gpu: 0 },
        { name: 'chrome.exe', pid: 4521, cpu: 12.4, ram: 2450, gpu: 5.2 },
        { name: 'Code.exe', pid: 8902, cpu: 5.1, ram: 980, gpu: 1.1 },
        { name: 'steam.exe', pid: 3341, cpu: 1.2, ram: 450, gpu: 0 },
        { name: 'Cyberpunk2077.exe', pid: 9999, cpu: 45.2, ram: 8500, gpu: 88.5 },
    ];

    function renderProcessTable() {
        const tbody = document.getElementById('process-table-body');
        tbody.innerHTML = mockProcesses.map(p => `
            <tr>
                <td>
                    <div class="process-name">
                        <div class="process-icon">${p.name[0].toUpperCase()}</div>
                        ${p.name}
                    </div>
                </td>
                <td>${p.pid}</td>
                <td>
                    <div style="display:flex; align-items:center; gap:8px;">
                        <span style="width:40px">${p.cpu.toFixed(1)}%</span>
                        <div class="bar-bg" style="width:60px; height:4px;">
                            <div class="bar-fill" style="width:${p.cpu}%; background:var(--accent-primary)"></div>
                        </div>
                    </div>
                </td>
                <td>${(p.ram / 1024).toFixed(1)} GB</td>
                <td>${p.gpu}%</td>
            </tr>
        `).join('');
    }

    // --- ä¸»å¾ªç¯ ---
    function updateStats() {
        const current = stream.next();

        // æ›´æ–°å¤§æ•°å­—
        document.getElementById('cpu-value').innerText = current.cpu.toFixed(1) + '%';
        document.getElementById('gpu-value').innerText = current.gpu.toFixed(1) + '%';
        
        const ramGB = (current.ram / 100 * 32).toFixed(1);
        document.getElementById('ram-value').innerText = ramGB + ' GB';
        
        const vramGB = (current.gpu / 100 * 24).toFixed(1); // å‡è®¾æ˜¾å­˜å’Œ GPU è´Ÿè½½ç›¸å…³
        document.getElementById('vram-value').innerText = vramGB + ' GB';

        // æ›´æ–°æ¸©åº¦æ¡
        const cpuTemp = 40 + current.cpu * 0.4;
        const gpuTemp = 35 + current.gpu * 0.5;
        
        document.getElementById('temp-cpu').innerText = cpuTemp.toFixed(0) + 'Â°C';
        document.getElementById('bar-temp-cpu').style.width = Math.min(100, cpuTemp) + '%';
        
        document.getElementById('temp-gpu').innerText = gpuTemp.toFixed(0) + 'Â°C';
        document.getElementById('bar-temp-gpu').style.width = Math.min(100, gpuTemp) + '%';

        // é‡ç»˜å›¾è¡¨
        mainChart.draw(stream);
    }

    // åˆå§‹åŒ–
    renderProcessTable();
    setInterval(updateStats, 1000);
    updateStats(); // ç«‹å³æ‰§è¡Œä¸€æ¬¡

</script>
</body>
</html>
