<Window x:Class="XhMonitor.Desktop.Windows.SettingsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:vm="clr-namespace:XhMonitor.Desktop.ViewModels"
        mc:Ignorable="d"
        Title="XhMonitor ËÆæÁΩÆ" Height="600" Width="800"
        WindowStartupLocation="CenterScreen" ResizeMode="NoResize"
        Background="#1E1E1E" Foreground="#E0E0E0">

    <Window.DataContext>
        <vm:SettingsViewModel />
    </Window.DataContext>

    <Window.Resources>
        <!-- Áé∞‰ª£ÂåñÊåâÈíÆÊ†∑Âºè -->
        <Style TargetType="Button">
            <Setter Property="Background" Value="#333333"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding" Value="15,8"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" CornerRadius="4">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="#444444"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- ÂØºËà™ÂàóË°®È°πÊ†∑Âºè -->
        <Style TargetType="ListBoxItem">
            <Setter Property="Padding" Value="20,15"/>
            <Setter Property="Foreground" Value="#AAAAAA"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ListBoxItem">
                        <Border x:Name="Border" Background="Transparent" BorderThickness="4,0,0,0" BorderBrush="Transparent">
                            <ContentPresenter Margin="{TemplateBinding Padding}"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsSelected" Value="True">
                                <Setter TargetName="Border" Property="Background" Value="#252526"/>
                                <Setter TargetName="Border" Property="BorderBrush" Value="#007ACC"/>
                                <Setter Property="Foreground" Value="White"/>
                            </Trigger>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="Border" Property="Background" Value="#2D2D30"/>
                                <Setter Property="Foreground" Value="White"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>

    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="200"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <!-- Â∑¶‰æßÂØºËà™Ê†è -->
        <Border Background="#252526" BorderBrush="#3F3F46" BorderThickness="0,0,1,0">
            <StackPanel>
                <TextBlock Text="ËÆæÁΩÆ" FontSize="24" FontWeight="Bold" Margin="20,30,20,30" Foreground="White"/>
                <ListBox x:Name="NavList" Background="Transparent" BorderThickness="0" SelectedIndex="0">
                    <ListBoxItem Content="üé® Â§ñËßÇËÆæÁΩÆ" Tag="Appearance"/>
                    <ListBoxItem Content="üìä Êï∞ÊçÆÈááÈõÜ" Tag="Data"/>
                    <ListBoxItem Content="‚öôÔ∏è Á≥ªÁªüÈÄâÈ°π" Tag="System"/>
                    <ListBoxItem Content="‚ÑπÔ∏è ÂÖ≥‰∫é" Tag="About"/>
                </ListBox>
            </StackPanel>
        </Border>

        <!-- Âè≥‰æßÂÜÖÂÆπÂå∫ -->
        <Grid Grid.Column="1" Margin="30">
            <Grid.RowDefinitions>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- ÂàÜÈ°µÂÜÖÂÆπ -->
            <TabControl x:Name="ContentTabControl"
                        Grid.Row="0"
                        Background="Transparent"
                        BorderThickness="0"
                        SelectedIndex="{Binding ElementName=NavList, Path=SelectedIndex}">

                <!-- È°µÈù¢ 1: Â§ñËßÇËÆæÁΩÆ -->
                <TabItem Visibility="Collapsed">
                    <ScrollViewer VerticalScrollBarVisibility="Auto">
                        <StackPanel>
                            <TextBlock Text="Â§ñËßÇËÆæÁΩÆ" FontSize="20" FontWeight="SemiBold" Margin="0,0,0,20" Foreground="White"/>

                            <TextBlock Text="‰∏ªÈ¢òÈ¢úËâ≤" Foreground="#AAAAAA" Margin="0,0,0,5"/>
                            <ComboBox Height="35" Margin="0,0,0,20" SelectedIndex="0">
                                <ComboBoxItem Content="Ê∑±Ëâ≤ (Dark)"/>
                                <ComboBoxItem Content="ÊµÖËâ≤ (Light)"/>
                            </ComboBox>

                            <TextBlock Text="Á™óÂè£ÈÄèÊòéÂ∫¶" Foreground="#AAAAAA" Margin="0,0,0,5"/>
                            <Grid Margin="0,0,0,20">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="50"/>
                                </Grid.ColumnDefinitions>
                                <Slider Maximum="100" Minimum="20" Value="{Binding Opacity}" VerticalAlignment="Center"/>
                                <TextBlock Grid.Column="1" Text="{Binding Opacity, StringFormat={}{0}%}" HorizontalAlignment="Right" VerticalAlignment="Center"/>
                            </Grid>
                        </StackPanel>
                    </ScrollViewer>
                </TabItem>

                <!-- È°µÈù¢ 2: Êï∞ÊçÆÈááÈõÜ -->
                <TabItem Visibility="Collapsed">
                    <ScrollViewer VerticalScrollBarVisibility="Auto">
                        <StackPanel>
                            <TextBlock Text="Êï∞ÊçÆÈááÈõÜ" FontSize="20" FontWeight="SemiBold" Margin="0,0,0,20" Foreground="White"/>

                            <TextBlock Text="ËøõÁ®ãÁõëÊéßÂÖ≥ÈîÆËØç" Foreground="#AAAAAA" Margin="0,0,0,5"/>
                            <ListBox ItemsSource="{Binding ProcessKeywords}"
                                     Height="120"
                                     Background="#333"
                                     Foreground="White"
                                     BorderThickness="0"
                                     Margin="0,0,0,10"/>
                            <Button Content="+ Ê∑ªÂä†ÂÖ≥ÈîÆËØç"
                                    Click="AddKeyword_Click"
                                    Margin="0,0,0,20"
                                    HorizontalAlignment="Left"
                                    Padding="10,5"/>

                            <TextBlock Text="Á≥ªÁªüÊåáÊ†áÈááÈõÜÈó¥Èöî (ÊØ´Áßí)" Foreground="#AAAAAA" Margin="0,0,0,5"/>
                            <TextBox Height="35" Text="{Binding SystemInterval}" VerticalContentAlignment="Center" Padding="5" Background="#333" Foreground="White" BorderThickness="0" Margin="0,0,0,20"/>

                            <TextBlock Text="ËøõÁ®ãÊåáÊ†áÈááÈõÜÈó¥Èöî (ÊØ´Áßí)" Foreground="#AAAAAA" Margin="0,0,0,5"/>
                            <TextBox Height="35" Text="{Binding ProcessInterval}" VerticalContentAlignment="Center" Padding="5" Background="#333" Foreground="White" BorderThickness="0" Margin="0,0,0,20"/>

                            <TextBlock Text="Top ËøõÁ®ãÊï∞Èáè" Foreground="#AAAAAA" Margin="0,0,0,5"/>
                            <TextBox Height="35" Text="{Binding TopProcessCount}" VerticalContentAlignment="Center" Padding="5" Background="#333" Foreground="White" BorderThickness="0" Margin="0,0,0,20"/>

                            <TextBlock Text="ÂéÜÂè≤Êï∞ÊçÆ‰øùÁïôÊó∂Èïø (Â§©)" Foreground="#AAAAAA" Margin="0,0,0,5"/>
                            <TextBox Height="35" Text="{Binding DataRetentionDays}" VerticalContentAlignment="Center" Padding="5" Background="#333" Foreground="White" BorderThickness="0" Margin="0,0,0,20"/>
                        </StackPanel>
                    </ScrollViewer>
                </TabItem>

                <!-- È°µÈù¢ 3: Á≥ªÁªüÈÄâÈ°π -->
                <TabItem Visibility="Collapsed">
                    <ScrollViewer VerticalScrollBarVisibility="Auto">
                        <StackPanel>
                            <TextBlock Text="Á≥ªÁªüÈÄâÈ°π" FontSize="20" FontWeight="SemiBold" Margin="0,0,0,20" Foreground="White"/>

                            <CheckBox Content="ÂºÄÊú∫Ëá™ÂêØÂä®" IsChecked="{Binding StartWithWindows}" Foreground="White" Margin="0,0,0,20"/>

                            <TextBlock Text="SignalR ÂêéÁ´ØÁ´ØÂè£" Foreground="#AAAAAA" Margin="0,0,0,5"/>
                            <TextBox Height="35" Text="{Binding SignalRPort}" VerticalContentAlignment="Center" Padding="5" Background="#333" Foreground="White" BorderThickness="0" Margin="0,0,0,20"/>

                            <TextBlock Text="Web ÂâçÁ´ØÁ´ØÂè£" Foreground="#AAAAAA" Margin="0,0,0,5"/>
                            <TextBox Height="35" Text="{Binding WebPort}" VerticalContentAlignment="Center" Padding="5" Background="#333" Foreground="White" BorderThickness="0" Margin="0,0,0,20"/>
                        </StackPanel>
                    </ScrollViewer>
                </TabItem>

                <!-- È°µÈù¢ 4: ÂÖ≥‰∫é -->
                <TabItem Visibility="Collapsed">
                    <ScrollViewer VerticalScrollBarVisibility="Auto">
                        <StackPanel>
                            <TextBlock Text="ÂÖ≥‰∫é" FontSize="20" FontWeight="SemiBold" Margin="0,0,0,20" Foreground="White"/>

                            <TextBlock Text="XhMonitor" FontSize="16" FontWeight="Bold" Foreground="White" Margin="0,0,0,10"/>
                            <TextBlock Text="ÁâàÊú¨Ôºö0.1.0" Foreground="#AAAAAA" Margin="0,0,0,5"/>
                            <TextBlock Text="ËΩªÈáèÁ∫ßÁ≥ªÁªüÊÄßËÉΩÁõëÊéßÂ∑•ÂÖ∑" Foreground="#AAAAAA" Margin="0,0,0,20" TextWrapping="Wrap"/>

                            <Separator Margin="0,10,0,20" Background="#3F3F46"/>

                            <TextBlock Text="ÊäÄÊúØÊ†à" FontSize="14" FontWeight="SemiBold" Foreground="White" Margin="0,0,0,10"/>
                            <TextBlock Foreground="#AAAAAA" TextWrapping="Wrap">
                                ‚Ä¢ ÂâçÁ´ØÔºöWPF (.NET 8)<LineBreak/>
                                ‚Ä¢ ÂêéÁ´ØÔºöASP.NET Core + SignalR<LineBreak/>
                                ‚Ä¢ Êï∞ÊçÆÂ∫ìÔºöSQLite + EF Core<LineBreak/>
                                ‚Ä¢ WebÔºöVue 3 + TypeScript
                            </TextBlock>
                        </StackPanel>
                    </ScrollViewer>
                </TabItem>
            </TabControl>

            <!-- Â∫ïÈÉ®Êìç‰ΩúÊ†è -->
            <StackPanel Grid.Row="1" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,20,0,0">
                <Button Content="ÊÅ¢Â§çÈªòËÆ§" Margin="0,0,10,0" Background="Transparent" Foreground="#AAAAAA" Click="RestoreDefaults_Click"/>
                <Button Content="Âèñ Ê∂à" Width="100" Margin="0,0,10,0" Click="Cancel_Click"/>
                <Button Content="‰øù Â≠ò" Width="100" Background="#007ACC" Click="Save_Click"/>
            </StackPanel>
        </Grid>
    </Grid>
</Window>
